<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Server Maintenance</title>
<style>
body{
  font-family: Meiryo,"Microsoft JhengHei","Microsoft YaHei",sans-serif;
  user-select: none;
}
@media screen and (min-aspect-ratio: 16/9) {
  #bgvideo {
    max-width: 100%;
  }
}
@media screen and (max-aspect-ratio: 16/9) {
  #bgvideo {
    max-height: 100%;
  }
}

#bgvideo {
  position: fixed;
  top: 50%;
  left: 30%;
  min-width: 100%;
  min-height: 100%;
  width: auto;
  height: auto;
  z-index: -100;
  transform: translateX(-30%) translateY(-50%);
  background: 30% 50% url(bg.jpg) no-repeat;
  background-size: cover; 
}
#bgm {
  display:none;
}
#message {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: rgba(255,255,255,0.5);
  box-shadow: 0 0 20px #333333;
  border-radius: 5px;
  margin: 10px;
  transition:all 0.3s ease-out;
  padding: 10px;
  cursor: default;
  user-select: none;
}
#message:hover {
  background: rgba(255,255,255,0.8);
}
#mute{
  position: fixed;
  top:auto;
  bottom:0;
  right: 0;
  padding:20px;
  color:#FFF;
  text-shadow: 0 0 3px #FFF;
  font-size:2em;
  cursor:pointer;
  opacity: 0.5;
  transition:all 0.3s ease-out;
}
#mute:hover{
  text-shadow: 0 0 5px #FFF;
  opacity: 1;
}
.icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style>

<svg style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
  <symbol id="icon-volume-high" viewBox="0 0 34 32">
  <title>volume-high</title>
  <path class="path1" d="M27.814 28.814c-0.384 0-0.768-0.146-1.061-0.439-0.586-0.586-0.586-1.535 0-2.121 2.739-2.739 4.247-6.38 4.247-10.253s-1.508-7.514-4.247-10.253c-0.586-0.586-0.586-1.536 0-2.121s1.536-0.586 2.121 0c3.305 3.305 5.126 7.7 5.126 12.374s-1.82 9.069-5.126 12.374c-0.293 0.293-0.677 0.439-1.061 0.439zM22.485 25.985c-0.384 0-0.768-0.146-1.061-0.439-0.586-0.586-0.586-1.535 0-2.121 4.094-4.094 4.094-10.755 0-14.849-0.586-0.586-0.586-1.536 0-2.121s1.536-0.586 2.121 0c2.55 2.55 3.954 5.94 3.954 9.546s-1.404 6.996-3.954 9.546c-0.293 0.293-0.677 0.439-1.061 0.439v0zM17.157 23.157c-0.384 0-0.768-0.146-1.061-0.439-0.586-0.586-0.586-1.535 0-2.121 2.534-2.534 2.534-6.658 0-9.192-0.586-0.586-0.586-1.536 0-2.121s1.535-0.586 2.121 0c3.704 3.704 3.704 9.731 0 13.435-0.293 0.293-0.677 0.439-1.061 0.439z"></path>
  <path class="path2" d="M13 30c-0.26 0-0.516-0.102-0.707-0.293l-7.707-7.707h-3.586c-0.552 0-1-0.448-1-1v-10c0-0.552 0.448-1 1-1h3.586l7.707-7.707c0.286-0.286 0.716-0.372 1.090-0.217s0.617 0.519 0.617 0.924v26c0 0.404-0.244 0.769-0.617 0.924-0.124 0.051-0.254 0.076-0.383 0.076z"></path>
  </symbol>
  <symbol id="icon-volume-mute2" viewBox="0 0 32 32">
  <title>volume-mute2</title>
  <path class="path1" d="M30 19.348v2.652h-2.652l-3.348-3.348-3.348 3.348h-2.652v-2.652l3.348-3.348-3.348-3.348v-2.652h2.652l3.348 3.348 3.348-3.348h2.652v2.652l-3.348 3.348 3.348 3.348z"></path>
  <path class="path2" d="M13 30c-0.26 0-0.516-0.102-0.707-0.293l-7.707-7.707h-3.586c-0.552 0-1-0.448-1-1v-10c0-0.552 0.448-1 1-1h3.586l7.707-7.707c0.286-0.286 0.716-0.372 1.090-0.217s0.617 0.519 0.617 0.924v26c0 0.404-0.244 0.769-0.617 0.924-0.124 0.051-0.254 0.076-0.383 0.076z"></path>
  </symbol>
  </defs>
</svg>

<video id="bgvideo" muted playsinline autoplay loop src="1080p.mp4"></video>

<audio id="bgm" src="320k.mp3" muted loop autoplay></audio>

<div id="message"></div>

<span id="mute"><svg class="icon icon-volume-mute2"><use xlink:href="#icon-volume-mute2"></use></svg></span>

<script>
var bgm = document.getElementById('bgm');
var player = document.getElementById('bgvideo');
var message = document.getElementById('message');
var toggleMute = function() {
  bgm.muted = bgm.muted === true ? false : true;
  if(bgm.muted){
    document.getElementById('mute').innerHTML = '<svg class="icon icon-volume-mute2"><use xlink:href="#icon-volume-mute2"></use></svg>';
  }
  else{
    document.getElementById('mute').innerHTML = '<svg class="icon icon-volume-high"><use xlink:href="#icon-volume-high"></use></svg>';
  }
}
document.getElementById('mute').addEventListener("click", toggleMute);
document.getElementById('message').addEventListener("click", function(){
  document.getElementById('message').style.opacity = 0;
});

player.addEventListener("timeupdate", function(e){
  if(player.currentTime > 49) player.currentTime = 0;
});

var startTimeUTC = new Date(Date.UTC(2016, 2, 22, 01, 30));
var finishTimeUTC = new Date(Date.UTC(2016, 2, 22, 09, 30));
if (navigator.language.toLowerCase().indexOf("ja") === 0) {
  message.innerHTML = "<strong>メンテナンス中</strong> ただいまメンテナンス中です。"+finishTimeUTC.toLocaleString()+" に終了予定です。ご迷惑おかけしておりますが、メンテナンス終了まで今しばらく、お待ちください。";
}
else if(navigator.language.toLowerCase().indexOf("zh") === 0){
  message.innerHTML = "<strong>伺服器維護</strong> 由於電力系統維修，目前伺服器暫停服務。伺服器預計會在 "+finishTimeUTC.toLocaleString()+" 左右恢復服務。不便之處 敬請原諒。";
}
else {
  message.innerHTML = "<strong>Scheduled Maintenance</strong> Due to a power system repair, the server is under maintenance for the moment. It should be back online at around "+finishTimeUTC.toLocaleString()+". Sorry for the inconvenience.";
}
</script>
